"use strict";var lodash=angular.module("lodash",[]);lodash.factory("_",function(){return window._});var madsLibrary=angular.module("MADS",[]);madsLibrary.factory("MADS",function(){return window.MADSAdrequest}),angular.module("almaMainosgalleria",["ngAnimate","ngTouch","ui.router","mm.foundation","lodash","MADS"]).config(["$stateProvider","$urlRouterProvider","AppConstants",function(a,t,e){a.state("landing",{url:"/",templateUrl:"app/components/landing/landing.html",title:e.appTitle}).state("inspector",{url:"/mainos/:adName",templateUrl:"app/components/inspector/inspector.html",controller:"InspectorCtrl"}).state("yhteystiedot",{url:"/yhteystiedot",title:"Yhteystiedot",templateUrl:"app/components/yhteystiedot/yhteystiedot.html"}),t.otherwise("/")}]).run(["$rootScope","AppConstants",function(a,t){a.$on("$stateChangeSuccess",function(e,i){a.headerTitle=i.title?i.title:t.appTitle})}]),angular.module("almaMainosgalleria").controller("NavigationCtrl",["$rootScope","$scope","ContentService",function(a,t,e){t.adLinks=e.getAdsList(),a.$on("inspector:ad-opened",function(t,e){a.headerTitle=e}),t.notSorted=function(a){return a?Object.keys(a):[]}}]),angular.module("almaMainosgalleria").controller("InspectorCtrl",["$scope","$rootScope","$stateParams","$location","ContentService","AdInjectorService","AppConstants",function(a,t,e,i,n,s,o){a.ad=null,a.adStyles={},a.adLoadingFailed=!1,a.contactEmail=o.sellerContactEmail,a.absUrl=i.absUrl(),a.init=function(){a.ad=n.getAd(e.adName),a.ad?(t.$broadcast("inspector:ad-opened",a.ad.name),s.injectAd(a.ad,"advertisement__wrapper").then(function(t){a.adLoadingFailed="ad"!==t.status?!0:!1}),a.ad.width&&(a.adStyles.width=a.ad.width),a.ad.height&&(a.adStyles.height=a.ad.height)):i.path("/")},a.notSorted=function(a){return a?Object.keys(a):[]}}]),angular.module("almaMainosgalleria").factory("ContentService",["_",function(a){var t={},e=window.almaAdData;return t.getAdsList=function(){var t=[];return a.map(e,function(e){t.push(a.pick(e,["name","category"]))}),t=a.groupBy(t,"category")},t.getAd=function(t){return a.find(e,"name",t)},t}]),angular.module("almaMainosgalleria").factory("AdInjectorService",["$q","MADS","AppConstants",function(a,t,e){var i={};i.injectAd=function(i,s){return new a(function(a){i.loadViaIframe?n(i,s,a):t.adrequest({async:!0,element_id:s,pid:e.madsPId,fid:i.madsId,callback:function(t){a(t)}})})};var n=function(a,t,i){for(var n=document.getElementById(t);n.hasChildNodes();)n.removeChild(n.lastChild);var s=document.createElement("iframe");s.src="/assets/alma-ads/ad-iframe.html",s.style.width=(a.width?a.width:e.adDefaultSize.width)+"px",s.style.height=(a.height?a.height:e.adDefaultSize.width)+"px",s.style.margin="0px",s.style.borderWidth="0px",s.style.padding="0px",s.scrolling="no",s.frameBorder="0",s.allowTransparency="true",s.adId=a.madsId,s.callback=function(a){i(a)},n.appendChild(s)};return i}]),angular.module("almaMainosgalleria").constant("AppConstants",{appTitle:"Mainosgalleria",madsPId:"5479789835",adDefaultSize:{width:300,height:300},sellerContactEmail:"verkkomainonta@almamedia.fi"}),angular.module("almaMainosgalleria").run(["$templateCache",function(a){a.put("app/components/inspector/inspector.html",'<div class="inspector__wrapper" ng-controller="InspectorCtrl" ng-init="init()"><div class="page-content__wrapper--upper"><div id="advertisement__wrapper" ng-style="adStyles"></div><div class="general-content__wrapper"><h3 class="punchline" ng-show="ad.punchline">{{ad.punchline}}</h3></div></div><div class="page-content__wrapper"><div class="general-content__wrapper"><div data-alert="" class="alert-box alert" ng-show="adLoadingFailed">Valitettavasti tätä mainostyyppiä ei pystytä esittämään laitteellasi.</div><div class="inspector__description--wrapper"><p class="inspector__description" ng-repeat="description in ad.description">{{description}}</p></div><table class="inspector__instructions" ng-show="ad.instructions"><thead><tr><th colspan="2"><h4 class="inspector__instructions--title">Aineisto-ohjeet: {{ad.name}}</h4></th></tr></thead><tbody><tr ng-repeat="title in notSorted(ad.instructions)" ng-init="content = ad.instructions[title]"><td><h6 class="instructions__title">{{title}}</h6><span class="instructions__content">{{content}}</span></td></tr></tbody></table><div class="inspector-footer__wrapper"><p>Onko tässä Sinun mainosratkaisusi? <a ng-href="mailto:{{contactEmail}}?subject={{ad.name}} -mainospaikka&body=Hei, kiinnostuin {{ad.name}} -mainospaikastanne osoitteessa {{absUrl}}!">Lähetä meille sähköpostia!</a></p></div></div></div></div>'),a.put("app/components/landing/landing.html",'<div class="page-content__wrapper--upper"><div class="general-content__wrapper"><h1>Tervetuloa!</h1><h3 class="punchline">Löydä juuri Sinulle sopiva mobiilimainosratkaisu, jolla tavoitat asiakkaasi kaikissa Alma-verkoston medioissa.</h3></div></div><div class="page-content__wrapper"><div class="general-content__wrapper"><img class="landing__image" src="/assets/images/landing-image-small.jpg" alt="Landing Image"></div></div>'),a.put("app/components/navigation/navigation-left.html",'<ul class="off-canvas-list navigation-left__wrapper" ng-controller="NavigationCtrl"><li><a ng-href="#/"><img src="/assets/images/icon-home.png" alt="Koti-ikoni">Etusivu</a></li><li><a ng-href="#/yhteystiedot"><img src="/assets/images/icon-contact.png" alt="Yhteystiedot-ikoni">Yhteystiedot</a></li><li ng-repeat-start="categoryName in notSorted(adLinks)" ng-init="category = adLinks[categoryName]"><label>Mainokset: {{categoryName}}</label></li><li ng-repeat-end="" ng-repeat="ad in category"><a ng-href="#/mainos/{{ad.name}}">{{ad.name}}</a></li></ul>'),a.put("app/components/navigation/navigation-top.html",'<div ng-controller="NavigationCtrl" class="navigation__wrapper--top"><div class="navigation-title__wrapper"><img class="navigation-title__logo" src="/assets/images/alma-logo.png" alt="Alma Logo"><h1 class="navigation-title">{{headerTitle}}</h1></div></div>'),a.put("app/components/yhteystiedot/yhteystiedot.html",'<div class="page-content__wrapper--upper"><div class="general-content__wrapper"><h1>Yhteystiedot</h1><h3 class="punchline">Ota yhteyttä omaan Alma-yhteyshenkilöösi tai verkkomainontatiimiimme!</h3></div></div><div class="page-content__wrapper"><div class="general-content__wrapper"><ul class="vcard"><li class="fn">Alma Mediaratkaisut</li><li class="street-address">Alvar Aallon katu 3 C</li><li><span class="zip">00100</span>, <span class="locality">Helsinki</span></li><li class="email"><a href="#">verkkomainonta@almamedia.fi</a></li></ul></div></div>')}]);